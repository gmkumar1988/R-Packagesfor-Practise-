(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{D77H:function(module,exports,e){},F9YM:function(module,e,t){"use strict";t.d(e,"c",(function(){return c})),t.d(e,"e",(function(){return s})),t.d(e,"a",(function(){return u})),t.d(e,"b",(function(){return d})),t.d(e,"d",(function(){return g}));var n=t("wd/R"),a=t.n(n),r=1,o=function findCueIndexForTimeHelper(e,t,n,a){if(t>n)return-1;var r=n-Math.floor((n-t)/2);return a<e[r].startTime?findCueIndexForTimeHelper(e,t,r-1,a):r!==e.length-1&&a>=e[r+1].startTime?findCueIndexForTimeHelper(e,r+1,n,a):r},i=function findCueIndexForTime(e,t){return o(e,0,e.length-1,t)},c=function formatTime(e){var t="m:ss",n=1e3*e,r,o;return a.a.duration(n).hours()>0&&(t="h:m"+t),a.a.utc(n).locale("en").format(t)},s=function getTimeFromDuration(e){var t=1e3*e,n=a.a.duration(t),r=n.hours(),o=n.minutes(),i;return{seconds:n.seconds(),minutes:o,hours:r}},u=function buildParagraphs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],a,r,o;return e.forEach((function(e){r&&(o=e.startTime-r.endTime),(!a||o>=t)&&(a=[],n.push(a)),a.push(e),r=e})),n},d=function findCuesAroundTime(e,t){var n,a=e[i(e,t)];if(!a)return[];return[a]},l=function getSentenceCueIndices(e,t){for(var n=[],a=e-1;-1!==a;){var r=t[a];if("."===r.text[r.text.length-1])break;n.unshift(a),a-=1}for(var o=e;o<=t.length-1;){var i=t[o];if(n.push(o),"."===i.text[i.text.length-1])break;o+=1}return n},m=function getAdjancentCueIndices(e,t){var n=[],a=[];return e>=2&&a.push(e-2),e>=1&&a.push(e-1),e<t-1&&n.push(e+1),e<t-2&&n.push(e+2),[].concat(a,[e],n)},g=function getAdjacentCues(e,t,n){var a=i(e,t);if(-1===a&&e.length>2)return[0,1,2].map((function(t){return e[t]}));if(a<0||a>=e.length)return[];if("en"===n)return l(a,e).map((function(t){return e[t]}));return m(a,e.length).map((function(t){return e[t]}))}},Ne6o:function(module,exports,e){var t=e("OIEB"),n=t.default?t.default:{},a,r=(0,e("HdzH").default)(n);r.getLocale=function(){return"en"},module.exports=r},OIEB:function(module,exports){exports.default={"ar":true,"de":true,"es":true,"fr":true,"id":true,"ja":true,"kk":true,"ko":true,"pt":true,"ru":true,"th":true,"uk":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},c5cO:function(module,e,t){"use strict";t.r(e);var n=t("VkAN"),a=t.n(n),r=t("J4zp"),o=t.n(r),i=t("AeFk"),c=t("q1tI"),s=t.n(c),u=t("HOoY"),d=t("kgYC"),l=t("8Hdl"),m=t("1HaE"),g=t("Ns7p"),p=t("Gcrz"),f=t("UYTu"),h,v=Object(f.a)(h||(h=a()(['\n  query VideoCourseMaterialsQuery($slug: String!) {\n    OnDemandCourseMaterialsV2 @naptime {\n      slug(slug: $slug, showHidden: true, includes: "modules") {\n        elements {\n          id\n          name\n        }\n        linked {\n          onDemandCourseMaterialModulesV1 {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n']))),b,x=function CourseContentDataProvider(e){var t=e.courseSlug,n=e.children;return(s.a.createElement(p.c,{query:v,variables:{slug:t}},(function(e){var a,r=e.loading,o=e.error,i=e.data;if(o||r)return n({course:null,modules:null,error:!!o,loading:!!r});var c,s=((null==i?void 0:i.OnDemandCourseMaterialsV2)||{}).slug,u=null==s?void 0:null===(a=s.elements)||void 0===a?void 0:a[0].id,d=(s||{}).elements[0].name,l=((s||{}).linked||{}).onDemandCourseMaterialModulesV1;return n({course:{id:u,name:d,slug:t},modules:l,error:!1,loading:!1})})))},N=t("cVIm"),O=t("TOZ3"),j=t("CsdX"),T=t("wwtN"),I=t("8WNh"),S=t("Ne6o"),y=t.n(S),C=t("nS3k"),E,P="".concat(N.a.url.resource_assets,"learner/icon_note.svg"),w="".concat(N.a.url.resource_assets,"learner/icon_highlight.svg"),D,k=function NotesReviewPageDataState(e){var t=e.dataState;return(s.a.createElement(O.b,{"aria-live":"assertive","aria-atomic":!0,"aria-relevant":"text",rootClassName:"rc-NotesReviewPageDataState",flexDirection:"column",justifyContent:"start",alignItems:"center"},"error"===t&&[s.a.createElement(T.a,{key:"icon",size:84,color:j.b.error}),s.a.createElement("div",{key:"message",className:"data-state-message headline-5-text","aria-live":"assertive","aria-atomic":!0,"aria-relevant":"text"},y()("There was an issue loading your notes data. Please try refreshing the page."))],"loading"===t&&[E||(E=s.a.createElement(I.a,{key:"icon",size:84})),s.a.createElement("div",{key:"message",className:"data-state-message headline-5-text"},y()("Loading notes..."))],"empty"===t&&[s.a.createElement(O.b,{justifyContent:"center",rootClassName:"state-icons"},s.a.createElement("img",{src:P,alt:y()("Take notes"),className:"placeholder-icon"}),s.a.createElement("img",{src:w,alt:y()("Highlight"),className:"placeholder-icon"})),s.a.createElement("div",{"aria-live":"assertive","aria-atomic":!0,"aria-relevant":"text",key:"message",className:"data-state-message headline-5-text"},y()("You have not added any notes yet. Notes can be created from video pages."))]))},U=t("3tO9"),M=t.n(U),V=t("RIqP"),W=t.n(V),A=t("6/Gu"),F=t("ZJgU"),L=t("fsL8"),z=t.n(L),Q=t("yXPU"),H=t.n(Q),q=t("mDxB"),R,B,Y,G=function cloneData(e){return JSON.parse(JSON.stringify(e))},J=Object(f.a)(R||(R=a()(["\n  query NotesDataQuery($courseId: String!, $start: Int, $limit: Int) {\n    UserNotesV1 @naptime {\n      courseWithContentSort(courseId: $courseId, start: $start, limit: $limit) {\n        elements {\n          id\n          userText\n          createdAt\n          updatedAt\n          details\n        }\n        paging\n      }\n    }\n  }\n"]))),Z=function CourseNotesQueryProvider(e){var t=e.course,n=e.pageSize,a=e.children;return(s.a.createElement(p.c,{query:J,variables:{courseId:t.id,start:0,limit:n},notifyOnNetworkStatusChange:!0},(function(e){var t=e.loading,r=e.error,o=e.data,i=e.fetchMore;if(r)return a({notes:null,onLastPage:!1,error:!0,fetchNextPage:function(){var e=H()(z()().mark((function _callee(){return z()().wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),_callee)})));function fetchNextPage(){return e.apply(this,arguments)}return fetchNextPage}(),loadingInitialPage:!1,loadingNextPage:!1});var c,s=((o||{}).UserNotesV1||{}).courseWithContentSort;if(t&&!(s||{}).elements)return a({notes:null,onLastPage:!1,error:!1,fetchNextPage:function(){var e=H()(z()().mark((function _callee2(){return z()().wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),_callee2)})));function fetchNextPage(){return e.apply(this,arguments)}return fetchNextPage}(),loadingInitialPage:!0,loadingNextPage:!1});var u=((s||{}).elements||[]).map(q.e),d=(s||{}).paging,l=!d||!d.next||d.total&&d.next>=d.total,m=function(){var e=H()(z()().mark((function _callee3(){return z()().wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({variables:{start:u.length,limit:n},updateQuery:function updateQuery(e,t){var n=t.fetchMoreResult,a=G(e);if(!n)return a;var r=a;r.UserNotesV1.courseWithContentSort.elements=[].concat(W()(e.UserNotesV1.courseWithContentSort.elements),W()(n.UserNotesV1.courseWithContentSort.elements));var o=n.UserNotesV1.courseWithContentSort.paging;return r.UserNotesV1.courseWithContentSort.paging=o,r}});case 2:case"end":return e.stop()}}),_callee3)})));return function fetchNextPage(){return e.apply(this,arguments)}}();return u.length-n>=0&&(u[u.length-n].shouldFocusOn=!0),a({notes:u,fetchNextPage:m,onLastPage:l,error:!1,loadingInitialPage:!1,loadingNextPage:t})})))},X=Object(f.a)(B||(B=a()(["\n  mutation DeleteNoteMutation($noteId: String!) {\n    UserNotesV1 @naptime {\n      delete(id: $noteId) {\n        id\n      }\n    }\n  }\n"]))),K=function CourseNotesDeletionProvider(e){var t=e.course,n=e.pageSize,a=e.children;return(s.a.createElement(p.b,{mutation:X},(function(e){var r;return a({deleteNote:function deleteNote(a){e({variables:{noteId:a},update:function update(e){var r=e.readQuery({query:J,variables:{courseId:t.id,start:0,limit:n}}),o=G(r),i,c,s,u=((((r||{}).UserNotesV1||{}).courseWithContentSort||{}).elements||[]).filter((function(e){return e.id!==a})),d=o;d.UserNotesV1.courseWithContentSort.elements=u,e.writeQuery({query:J,variables:{courseId:t.id,start:0,limit:n},data:d})}})}})})))},ee=Object(f.a)(Y||(Y=a()(["\n  mutation UpdateNoteMutation($noteId: String!, $noteDraft: DataMap!) {\n    UserNotesV1 @naptime {\n      update(id: $noteId, input: $noteDraft) {\n        elements {\n          id\n          userText\n          createdAt\n          updatedAt\n          details\n        }\n      }\n    }\n  }\n"]))),te=function CourseNotesUpdateProvider(e){var t=e.children;return(s.a.createElement(p.b,{mutation:ee},(function(e){var n;return t({updateNote:function updateNote(t,n){e({variables:{noteId:t,noteDraft:n}})}})})))},ne,ae=function CourseNotesDataProvider(e){var t=e.course,n=e.pageSize,a=e.children;return(s.a.createElement(Z,{course:t,pageSize:n},(function(e){var r=e.notes,o=e.fetchNextPage,i=e.error,c=e.loadingInitialPage,u=e.loadingNextPage,d=e.onLastPage;return(s.a.createElement(K,{course:t,pageSize:n},(function(e){var t=e.deleteNote;return(s.a.createElement(te,null,(function(e){var n=e.updateNote;return a({notes:r,onLastPage:d,fetchNextPage:o,deleteNote:t,updateNote:n,error:i,loadingInitialPage:c,loadingNextPage:u})})))})))})))},re,oe,ie,ce=function cloneData(e){return JSON.parse(JSON.stringify(e))},se=Object(f.a)(re||(re=a()(["\n  query NotesModuleQuery($courseId: String!, $moduleId: String!, $start: Int, $limit: Int) {\n    UserNotesV1 @naptime {\n      courseModuleWithContentSort(courseId: $courseId, moduleId: $moduleId, start: $start, limit: $limit) {\n        elements {\n          id\n          userText\n          createdAt\n          updatedAt\n          details\n        }\n        paging\n      }\n    }\n  }\n"]))),ue=function ModuleNotesQueryProvider(e){var t=e.course,module=e.module,n=e.pageSize,a=e.children;return(s.a.createElement(p.c,{query:se,variables:{courseId:t.id,moduleId:module.id,start:0,limit:n},notifyOnNetworkStatusChange:!0},(function(e){var t=e.loading,r=e.error,o=e.data,i=e.fetchMore;if(r)return a({notes:null,onLastPage:!1,fetchNextPage:function(){var e=H()(z()().mark((function _callee(){return z()().wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),_callee)})));function fetchNextPage(){return e.apply(this,arguments)}return fetchNextPage}(),error:!0,loadingInitialPage:!1,loadingNextPage:!1});if(t&&!(((o||{}).UserNotesV1||{}).courseModuleWithContentSort||{}).elements)return a({notes:null,onLastPage:!1,fetchNextPage:function(){var e=H()(z()().mark((function _callee2(){return z()().wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),_callee2)})));function fetchNextPage(){return e.apply(this,arguments)}return fetchNextPage}(),error:!1,loadingInitialPage:!0,loadingNextPage:!1});var c,s=((o||{}).UserNotesV1||{}).courseModuleWithContentSort,u=((s||{}).elements||[]).map(q.e),d=(s||{}).paging,l=!d||!d.next||d.total&&d.next>=d.total,m=function(){var e=H()(z()().mark((function _callee3(){return z()().wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({variables:{start:u.length,limit:n},updateQuery:function updateQuery(e,t){var n=t.fetchMoreResult,a=ce(e);if(!n)return a;var r=a;r.UserNotesV1.courseModuleWithContentSort.elements=[].concat(W()(e.UserNotesV1.courseModuleWithContentSort.elements),W()(n.UserNotesV1.courseModuleWithContentSort.elements));var o=n.UserNotesV1.courseModuleWithContentSort.paging;return r.UserNotesV1.courseModuleWithContentSort.paging=o,r}});case 2:case"end":return e.stop()}}),_callee3)})));return function fetchNextPage(){return e.apply(this,arguments)}}();return u.length-n>=0&&(u[u.length-n].shouldFocusOn=!0),a({notes:u,fetchNextPage:m,onLastPage:l,error:!1,loadingInitialPage:!1,loadingNextPage:!!t})})))},de=Object(f.a)(oe||(oe=a()(["\n  mutation DeleteNoteMutation($noteId: String!) {\n    UserNotesV1 @naptime {\n      delete(id: $noteId) {\n        id\n      }\n    }\n  }\n"]))),le=function ModuleNotesDeletionProvider(e){var t=e.course,module=e.module,n=e.pageSize,a=e.children;return(s.a.createElement(p.b,{mutation:de},(function(e){var r;return a({deleteNote:function deleteNote(a){e({variables:{noteId:a},update:function update(e){var r=e.readQuery({query:se,variables:{courseId:t.id,moduleId:module.id,start:0,limit:n}}),o=ce(r),i,c,s,u=((((r||{}).UserNotesV1||{}).courseModuleWithContentSort||{}).elements||[]).filter((function(e){return e.id!==a})),d=o;d.UserNotesV1.courseModuleWithContentSort.elements=u,e.writeQuery({query:se,variables:{courseId:t.id,moduleId:module.id,start:0,limit:n},data:d})}})}})})))},me=Object(f.a)(ie||(ie=a()(["\n  mutation UpdateNoteMutation($noteId: String!, $noteDraft: DataMap!) {\n    UserNotesV1 @naptime {\n      update(id: $noteId, input: $noteDraft) {\n        elements {\n          id\n          userText\n          createdAt\n          updatedAt\n          details\n        }\n      }\n    }\n  }\n"]))),ge=function ModuleNotesUpdateProvider(e){var t=e.children;return(s.a.createElement(p.b,{mutation:me},(function(e){var n;return t({updateNote:function updateNote(t,n){e({variables:{noteId:t,noteDraft:n}})}})})))},pe,fe=function ModuleNotesDataProvider(e){var t=e.course,module=e.module,n=e.pageSize,a=e.children;return(s.a.createElement(ue,{course:t,module:module,pageSize:n},(function(e){var r=e.notes,o=e.fetchNextPage,i=e.error,c=e.loadingInitialPage,u=e.loadingNextPage,d=e.onLastPage;return(s.a.createElement(le,{course:t,module:module,pageSize:n},(function(e){var t=e.deleteNote;return(s.a.createElement(ge,null,(function(e){var n=e.updateNote;return a({notes:r,onLastPage:d,fetchNextPage:o,deleteNote:t,updateNote:n,error:i,loadingInitialPage:c,loadingNextPage:u})})))})))})))},he,ve=function ContentNotesDataProvider(e){var t=e.contentType,n=e.course,module=e.module,a=e.pageSize,r=void 0===a?10:a,o=e.children;if("module"===t)return module?s.a.createElement(fe,{course:n,module:module,pageSize:r},(function(e){return o(e)})):null;return(s.a.createElement(ae,{course:n,pageSize:r},(function(e){return o(e)})))},be=t("p6CZ"),xe,Ne,Oe=function Divider(){var e=Object(d.a)();return Object(i.d)("div",{css:Object(i.c)(xe||(xe=a()(["\n        width: 100%;\n        margin: ",";\n        border-top: 1px solid ",";\n      "])),e.spacing(24,0),e.palette.gray[300])})},je=t("F9YM"),Te,Ie,Se,ye;!function(e){e[e.VIEW=0]="VIEW",e[e.EDIT=1]="EDIT",e[e.DELETE=2]="DELETE"}(Te||(Te={}));var Ce,Ee=function NoteDelete(e){var t=e.setCurrentState,n=e.onDelete,r=e.text,o=e.note,c=Object(d.a)(),u=Object(je.c)(o.noteStartTs),m=o.noteEndTs?Object(je.c)(o.noteEndTs):"",g=o.itemName;return Object(i.d)(s.a.Fragment,null,r&&Object(i.d)(s.a.Fragment,null,Object(i.d)(l.a,{component:"p",css:Object(i.c)(Ie||(Ie=a()(["\n              margin: ",";\n            "])),c.spacing(16,0,8)),variant:"h3semibold"},y()("Your Notes")),Object(i.d)(l.a,{variant:"body1"},r)),Object(i.d)(A.a,{container:!0,alignItems:"flex-end",css:{flexGrow:1}},Object(i.d)(A.a,{item:!0,container:!0,justifyContent:"flex-start",alignItems:"center"},Object(i.d)(A.a,{item:!0,css:{margin:c.spacing(16,32,0,0)}},Object(i.d)(l.a,{variant:"body1","aria-live":"polite"},y()("Are you sure you want to delete the entire note?"))),Object(i.d)(A.a,{item:!0,container:!0,css:Object(i.c)(Se||(Se=a()(["\n              flex-basis: 0;\n              flex-wrap: nowrap;\n              margin: ",";\n            "])),c.spacing(16,0,0))},Object(i.d)(A.a,{item:!0,css:Object(i.c)(ye||(ye=a()(["\n                margin: ",";\n              "])),c.spacing(0,16,0,0))},Object(i.d)(F.a,{onClick:function onClick(){n(),t(Te.VIEW)},size:"small",variant:"primary","aria-label":y()("Delete your notes for #{itemName} from time #{noteStartTimestamp} to #{noteEndTimestamp}",{itemName:g,noteStartTimestamp:u,noteEndTimestamp:m})},y()("Delete"))),Object(i.d)(A.a,{item:!0},Object(i.d)(F.a,{onClick:function onClick(){return t(Te.VIEW)},size:"small",variant:"secondary","aria-label":y()("Cancel deleting your notes for #{itemName} from time #{noteStartTimestamp} to #{noteEndTimestamp}",{itemName:g,noteStartTimestamp:u,noteEndTimestamp:m})},y()("Cancel")))))))},Pe,we,De,ke=function NoteEdit(e){var t=e.setCurrentState,n=e.text,r=e.onSave,u=Object(d.a)(),m=Object(c.useState)(n),g=o()(m,2),p=g[0],f=g[1],h=n.split(" ",20).join(" ");return Object(i.d)(s.a.Fragment,null,Object(i.d)(l.a,{component:"p",css:Object(i.c)(Pe||(Pe=a()(["\n          margin: ",";\n        "])),u.spacing(16,0,8)),variant:"h3semibold"},y()("Your Notes")),Object(i.d)("textarea",{"aria-label":y()("Your Notes"),autoFocus:!0,css:M()({width:"100%",maxHeight:"175px",overflowY:"scroll",margin:u.spacing(0,0,0),padding:u.spacing(16),border:"1px solid ".concat(u.palette.gray[500]),borderRadius:2},u.typography.body1),id:"edit-note",defaultValue:p,onChange:function onChange(e){return f(e.target.value)},rows:3}),Object(i.d)(A.a,{container:!0,justifyContent:"flex-start",css:{margin:u.spacing(16,0,0)}},Object(i.d)(A.a,{item:!0},Object(i.d)(F.a,{onClick:function onClick(){r(p),t(Te.VIEW)},size:"small",variant:"primary","aria-label":y()("Save your notes for #{text}",{text:h})},y()("Save"))),Object(i.d)(A.a,{item:!0},Object(i.d)(F.a,{css:Object(i.c)(we||(we=a()(["\n              margin: ",";\n            "])),u.spacing(0,0,0,16)),onClick:function onClick(){return t(Te.VIEW)},size:"small",variant:"secondary","aria-label":y()("Cancel editing notes for #{text}",{text:h})},y()("Cancel")))))},Ue=t("fAYU"),_e=t("GUMY"),Me=t("gNwb"),Ve=t("Ys1X"),We=t("9A5E"),$e,Ae,Fe,Le,ze,Qe,He,qe,Re,Be=function formatNoteClipDescription(e){var t=e.noteStartTs,n=e.noteEndTs,a=e.captureTs;if(t&&n)return"".concat(Object(je.c)(t)," - ").concat(Object(je.c)(n));return"".concat(Object(je.c)(a))},Ye=function constructItemLink(e,t,n){return"".concat(Object(Ve.c)(e),"/lecture/").concat(t,"?t=").concat(Math.trunc(n))},Ge=function VideoSnapshot(e){var t=e.snapshotUrl,n=Object(d.a)(),r=Object(i.c)($e||($e=a()(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    opacity: 0;\n    background: ",";\n    transition: opacity 0.2s linear;\n    :hover {\n      opacity: 0.6;\n    }\n  "])),n.palette.black[500]),o=Object(i.c)(Ae||(Ae=a()(["\n    top: 50%;\n    left: 50%;\n    position: absolute;\n    transform: translate(-50%, -50%);\n  "])));return Object(i.d)("div",{css:Object(i.c)(Fe||(Fe=a()(["\n        width: 197px;\n        position: relative;\n      "])))},Object(i.d)("div",{css:r},Object(i.d)(l.a,{color:"invertBody",css:o},y()("Go to video"))),Object(i.d)("img",{css:Object(i.c)(Le||(Le=a()(["\n          width: 100%;\n          border: 1px solid ",";\n        "])),n.palette.gray[400]),src:t,alt:"note"}))},Je=Object(Me.d)({type:"BUTTON"})(Ue.a),Ze,Xe=function NoteInformation(e){var t,n,r=e.note,o=e.course,c=Object(d.a)();return Object(i.d)(s.a.Fragment,null,Object(i.d)(A.a,{container:!0,alignItems:"center",wrap:"nowrap"},!r.snapshotUrl&&Object(i.d)("div",{css:Object(i.c)(ze||(ze=a()(["\n              flex-shrink: 0;\n              height: ",";\n            "])),c.spacing(24))},Qe||(Qe=Object(i.d)(_e.a,{size:"large"}))),Object(i.d)("div",{css:Object(i.c)(He||(He=a()(["\n            margin: ",";\n          "])),c.spacing(0,0,0,r.snapshotUrl?0:8))},r.snapshotUrl&&Object(i.d)("div",{"data-e2e":"snapshot-container",css:Object(i.c)(qe||(qe=a()(["\n                margin: ",";\n              "])),c.spacing(0,0,16,0))},Object(i.d)(We.a,{trackingName:"highlight_link",data:{itemId:r.itemId},href:Ye(o.slug,null!==(t=r.itemId)&&void 0!==t?t:"",r.noteStartTs),target:"_blank",role:"link",rel:"noopener noreferrer"},Object(i.d)(Ge,{snapshotUrl:r.snapshotUrl}))),Object(i.d)(Je,{variant:"quiet",trackingName:"highlight_link",trackingData:{itemId:r.itemId},href:Ye(o.slug,null!==(n=r.itemId)&&void 0!==n?n:"",r.noteStartTs),target:"_blank",role:"link",rel:"noopener noreferrer",typographyVariant:"body1"},r.itemName))),Object(i.d)(l.a,{css:Object(i.c)(Re||(Re=a()(["\n          margin: ",";\n\n          "," {\n            margin: ",";\n          }\n        "])),c.spacing(4,0,0,r.snapshotUrl?0:32),c.breakpoints.down("sm"),c.spacing(4,0,16,r.snapshotUrl?0:32)),variant:"body2",color:"supportText","aria-label":y()("Duration"),dir:"ltr"},Be(r)))},Ke=t("UIee"),et=t("rGs/"),tt,nt,at,rt,ot,it,ct=function NoteView(e){var t=e.text,n=e.setCurrentState,r=e.note,o=Object(d.a)(),c=function formatAriaLabelForButton(e){var t=r.itemName,n=Object(je.c)(r.noteStartTs),a=r.noteEndTs?Object(je.c)(r.noteEndTs):"",o="";return o=t?"EDIT"===e?a?y()("Edit your notes for #{videoName} from time #{videoNoteStartTimestamp} to #{videoNoteEndTimestamp}",{videoName:t,videoNoteStartTimestamp:n,videoNoteEndTimestamp:a}):y()("Edit your notes for #{videoName} from time #{videoNoteStartTimestamp}",{videoName:t,videoNoteStartTimestamp:n}):a?y()("Delete your notes for #{videoName} from time #{videoNoteStartTimestamp} to #{videoNoteEndTimestamp}",{videoName:t,videoNoteStartTimestamp:n,videoNoteEndTimestamp:a}):y()("Delete your notes for #{videoName} from time #{videoNoteStartTimestamp}",{videoName:t,videoNoteStartTimestamp:n}):"EDIT"===e?y()("Edit your notes"):y()("Delete your notes")};return Object(i.d)(s.a.Fragment,null,t&&Object(i.d)(s.a.Fragment,null,Object(i.d)(l.a,{component:"p",css:Object(i.c)(tt||(tt=a()(["\n              margin: ",";\n            "])),o.spacing(16,0,8)),variant:"h3semibold","data-e2e":"video-note-label"},y()("Your Notes")),Object(i.d)(l.a,{variant:"body1","data-e2e":"video-note-text"},t)),Object(i.d)(A.a,{container:!0,alignItems:"flex-end",css:{flexGrow:1}},Object(i.d)(A.a,{container:!0,justifyContent:"flex-start",css:{margin:o.spacing(16,0,0)}},Object(i.d)(A.a,{item:!0,css:Object(i.c)(nt||(nt=a()(["\n              /* Required to align the text in the button correctly with the rest of the notes */\n              margin-left: -8px;\n            "])))},Object(i.d)(F.a,{icon:at||(at=Object(i.d)(Ke.a,{size:"small"})),iconPosition:"before",onClick:function onClick(){return n(Te.EDIT)},size:"small",variant:"ghost","aria-label":c("EDIT")},y()("Edit"))),Object(i.d)(A.a,{css:Object(i.c)(rt||(rt=a()(["\n              margin: ",";\n            "])),o.spacing(0,0,0,16)),item:!0},Object(i.d)(F.a,{icon:ot||(ot=Object(i.d)(et.a,{size:"small"})),iconPosition:"before",onClick:function onClick(){return n(Te.DELETE)},size:"small",variant:"ghost","aria-label":c("DELETE")},y()("Delete"))))))},st,ut,dt,lt=Object(c.forwardRef)((function(e,t){var n=e.note,r=e.course,s=e.onSave,u=e.onDelete,m=Object(c.useState)(Te.VIEW),g=o()(m,2),p=g[0],f=g[1],h=Object(d.a)(),v=n.itemName,b=Object(je.c)(n.noteStartTs),x=n.noteEndTs?Object(je.c)(n.noteEndTs):"";return Object(i.d)("li",{css:Object(i.c)(st||(st=a()(["\n        width: 100%;\n        list-style: none;\n      "]))),ref:t},ut||(ut=Object(i.d)(Oe,null)),Object(i.d)(A.a,{container:!0,"data-e2e":"note-card"},Object(i.d)(A.a,{item:!0,xs:12,sm:5,md:5,lg:4,xl:3,css:{padding:h.spacing(0,32,0,0)}},Object(i.d)(Xe,{note:n,course:r})),Object(i.d)(A.a,{item:!0,xs:12,sm:7,md:7,lg:8,xl:9},Object(i.d)(A.a,{container:!0,direction:"column",css:{height:"100%"}},Object(i.d)(A.a,{item:!0,css:{marginLeft:h.spacing(4)}},Object(i.d)(l.a,{variant:"body1","data-e2e":"video-section-text"},n.transcriptText)),p===Te.VIEW&&Object(i.d)(ct,{setCurrentState:f,text:n.noteText,note:n}),p===Te.EDIT&&Object(i.d)(ke,{setCurrentState:f,text:n.noteText,onSave:function onSave(e){return s(n.id,e)}}),p===Te.DELETE&&Object(i.d)(Ee,{setCurrentState:f,onDelete:function onDelete(){return u(n.id)},note:n,text:x?y()("#{itemName} from time #{noteStartTimestamp} to #{noteEndTimestamp}",{itemName:v,noteStartTimestamp:b,noteEndTimestamp:x}):y()("#{itemName} from time #{noteStartTimestamp}",{itemName:v,noteStartTimestamp:b})})))))})),mt,gt,pt,ft,ht,vt=20,bt=function partialSortByTimestamp(e,t,n){var a=e.slice(0,t),r=e.slice(n),o=e.slice(t,n).sort(q.a);return e.length=0,e.push.apply(e,W()(a.concat(o).concat(r))),e},xt=function sortByTimestampWithinModule(e){for(var t=0,n=t+1;n<e.length;){for(;n<e.length&&e[n].itemName===e[n-1].itemName;)n+=1;e=bt(e,t,n),n=(t=n)+1}return e},Nt=function useHookWithRefCallback(){var e=Object(c.useRef)(null),t;return[Object(c.useCallback)((function(t){var n;t&&t.querySelectorAll("a")[0].focus();e.current=t}),[])]},Ot=function NoteList(e){var t=Nt(),n,r=o()(t,1)[0];return Object(i.d)(ve,{pageSize:20,contentType:e.module?"module":"course",course:e.course,module:e.module},(function(t){var n=t.notes,o=t.onLastPage,c=t.fetchNextPage,u=t.error,d=t.loadingInitialPage,l=t.loadingNextPage,m=t.updateNote,g=t.deleteNote;if(u)return mt||(mt=Object(i.d)(k,{dataState:"error"}));if(d)return gt||(gt=Object(i.d)(k,{dataState:"loading"}));if(!n||0===n.length)return pt||(pt=Object(i.d)(k,{dataState:"empty"}));var p=xt(n);return Object(i.d)(s.a.Fragment,null,Object(i.d)("ul",{css:Object(i.c)(ft||(ft=a()(["\n                margin: 0;\n                padding: 0;\n              "])))},p.map((function(t){return Object(i.d)(lt,{course:e.course,key:t.id,note:t,onSave:function onSave(n,a){var r;m(n,Object(be.d)({itemId:t.itemId,courseId:e.course.id,highlight:M()(M()({},t),{},{noteText:null!==(r=null!=a?a:t.noteText)&&void 0!==r?r:""}),languageCode:t.languageCode}))},onDelete:function onDelete(e){return g(e)},ref:t.shouldFocusOn?r:void 0})}))),ht||(ht=Object(i.d)(Oe,null)),!o&&Object(i.d)(A.a,{container:!0,justifyContent:"center"},Object(i.d)(F.a,{variant:"secondary",disabled:l,onClick:c},l?y()("Loading Notes..."):y()("See More Notes"))))}))},jt=t("rzCt"),Tt=t("fguj"),It,St,yt=function FilterDropdownItem(e){var t=e.content,n=t&&"course"!==t.contentType?t.name:y()("All notes");return Object(i.d)("div",{css:Object(i.c)(It||(It=a()(["\n        width: 100%;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: nowrap;\n      "])))},n)},Ct,Et=function NotesPageFilterDropdown(e){var t=e.course,n=e.modules,r=e.selectedContentId,o=e.onSelect,c=void 0===o?function(){}:o,s=Object(d.a)(),u=r||t.id,l=M()({contentType:"course"},t),m=n.map((function(module){return M()({contentType:"module"},module)})),g=[l].concat(W()(m));return Object(i.d)("div",{css:Object(i.c)(St||(St=a()(["\n        margin: ",";\n        "," {\n          max-width: 306px;\n        }\n      "])),s.spacing(12,0,24),s.breakpoints.up("sm")),className:"rc-NotesPageFilterDropdown"},Object(i.d)(jt.a,{label:y()("Filter"),value:u,onChange:function onChange(e){return c(e.target.value)},fullWidth:!0},g.map((function(e){return Object(i.d)(Tt.a,{key:e.id,value:e.id},Object(i.d)(yt,{content:e}))}))))},Pt,wt,Dt,kt;t.d(e,"NotesReviewPageWithCourseData",(function(){return Ut}));var Ut=function NotesReviewPageWithCourseData(e){var t=Object(c.useState)(),n=o()(t,2),r=n[0],u=n[1];s.a.useEffect((function(){g.a.get("LearnerNotesPendoSampleIncluded")&&Object(m.a)()}),[]);var p=Object(d.a)();return Object(i.d)("div",{css:Object(i.c)(Pt||(Pt=a()(["\n        "," {\n          margin: ",";\n        }\n\n        "," {\n          margin: ",";\n        }\n\n        a:focus {\n          outline-offset: 2px;\n        }\n\n        /* \n          We are setting the typography of components that are not yet migrated to CDS and that are still being used by the original page \n          We don't want to override the font if the rest of the page is not using CDS\n        */\n        .rc-NotesReviewPageDataState * {\n          ",";\n        }\n        .rc-NotesReviewPageDataState {\n          margin: ",";\n        }\n      "])),p.breakpoints.up("md"),p.spacing(32,48),p.breakpoints.down("sm"),p.spacing(16,0),p.typography.h2,p.spacing(48,0,0))},Object(i.d)(l.a,{variant:"h1semibold",css:Object(i.c)(wt||(wt=a()(["\n          margin: ",";\n          "," {\n            margin: ",";\n          }\n        "])),p.spacing(0,0,48),p.breakpoints.down("sm"),p.spacing(0,0,32))},y()("Notes")),Object(i.d)(Et,{modules:e.modules,course:e.course,selectedContentId:r,onSelect:u}),Object(i.d)(Ot,{course:e.course,module:e.modules.find((function(e){return e.id===r}))||null}))},_t=u.a.createTrackedContainer((function(e){var t;return{namespace:{page:"notes_review"},courseId:e.course.id}}))(Ut),Mt=function NotesReviewPage(e){var t=e.params.courseSlug;return Object(i.d)(x,{courseSlug:t},(function(e){var t=e.course,n=e.modules,a=e.error,r=e.loading;if(a)return Dt||(Dt=Object(i.d)(k,{dataState:"error"}));if(r)return kt||(kt=Object(i.d)(k,{dataState:"loading"}));return Object(i.d)(_t,{course:t,modules:n})}))},Vt=e.default=Mt},mDxB:function(module,e,t){"use strict";t.d(e,"e",(function(){return g})),t.d(e,"f",(function(){return p})),t.d(e,"b",(function(){return f})),t.d(e,"c",(function(){return h})),t.d(e,"a",(function(){return v})),t.d(e,"d",(function(){return b}));var n=t("fsL8"),a=t.n(n),r=t("yXPU"),o=t.n(r),i=t("fw5G"),c=t.n(i),s=t("DnuM"),u=t("sQ/U"),d=t("p6CZ"),l=Object(s.a)("/api/userNotes.v1",{type:"rest"}),m=function(){var e=o()(a()().mark((function _callee(e,t,n,r,o){var i,u,m,g,p;return a()().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return i=(new c.a).addQueryParam("action","getScreenShotUploadUrlV2").addQueryParam("courseId",e).addQueryParam("itemId",t).addQueryParam("userId",r).addQueryParam("timestamp",n),a.next=3,l.post(i.toString());case 3:return u=a.sent,m=u.split("?")[0],g=Object(d.c)(o),p=Object(s.a)(u,{type:"rest"}),a.next=9,p.put("",{contentType:"image/png",data:g,processData:!1});case 9:return a.abrupt("return",m);case 10:case"end":return a.stop()}}),_callee)})));return function uploadSnapshot(t,n,a,r,o){return e.apply(this,arguments)}}(),g=function reshapeHighlightForClient(e){var t=e.id,n=e.createdAt,a=e.updatedAt,r=e.userText,o=e.shouldFocusOn,i=e.details.definition,c=i.noteEndTs,s=i.noteStartTs,u=i.captureTs,d=i.snapshotUrl,l=i.transcriptTextStartIndex,m=i.transcriptTextEndIndex,g=i.transcriptText,p,f,h;return{id:t,itemId:i.itemId,itemName:i.itemName,clientId:t,createdAt:n,updatedAt:a,languageCode:i.languageCode,noteText:r,noteEndTs:c&&c/1e3,noteStartTs:s&&s/1e3,captureTs:u&&u/1e3,snapshotUrl:d,transcriptTextStartIndex:l,transcriptTextEndIndex:m,transcriptText:g,pendingCreate:!1,pendingUpdate:!1,shouldFocusOn:o}},p=function updateHighlight(e){var t=e.itemId,n=e.courseId,a=e.languageCode,r=e.id,o=e.highlight,i=new c.a(r),s=Object(d.d)({itemId:t,courseId:n,highlight:o,languageCode:a});return l.put(i.toString(),{data:s})},f=function(){var e=o()(a()().mark((function _callee2(e){var t,n,r,o,i,c,s,g,p,f,h;return a()().wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.itemId,i=e.courseId,c=e.languageCode,s=e.highlight,g=Object(d.d)({itemId:o,courseId:i,highlight:s,languageCode:c}),p=u.a.get().id,!s.snapshotDataUrl){a.next=8;break}return a.next=6,m(i,o,g.details.definition.noteStartTs,p,s.snapshotDataUrl);case 6:f=a.sent,g.details.definition.snapshotUrl=f;case 8:return a.next=10,l.post("",{data:g});case 10:return h=a.sent,a.abrupt("return",{id:h.elements[0].id,snapshotUrl:(null===(t=h.elements[0])||void 0===t?void 0:null===(n=t.details)||void 0===n?void 0:null===(r=n.definition)||void 0===r?void 0:r.snapshotUrl)||""});case 12:case"end":return a.stop()}}),_callee2)})));return function createHighlight(t){return e.apply(this,arguments)}}(),h=function deleteHighlight(e){var t=e.id,n=new c.a(t);return l.delete(n.toString())},v=function compareHighlightsByStartTimestamp(e,t){if(e.noteStartTs<t.noteStartTs)return-1;if(e.noteStartTs>t.noteStartTs)return 1;return 0},b=function(){var e=o()(a()().mark((function _callee3(e){var t,n,r,o,i;return a()().wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:return t=e.itemId,n=e.courseId,r=e.languageCode,o=(new c.a).addQueryParam("itemId",t).addQueryParam("courseId",n).addQueryParam("languageCode",r).addQueryParam("q","courseItemLanguageCode").addQueryParam("fields","id, userText, createdAt, updatedAt, details"),a.next=4,l.get(o.toString());case 4:return i=a.sent,a.abrupt("return",i.elements.map(g).sort(v));case 6:case"end":return a.stop()}}),_callee3)})));return function getHighlights(t){return e.apply(this,arguments)}}(),x=function(){var e=o()(a()().mark((function _callee4(e){var t,n,r,o;return a()().wrap((function _callee4$(a){for(;;)switch(a.prev=a.next){case 0:return n=e.courseId,r=(new c.a).addQueryParam("courseId",n).addQueryParam("q","course").addQueryParam("fields","id, userText, createdAt, updatedAt, details"),a.next=4,l.get(r.toString());case 4:return o=a.sent,a.abrupt("return",null==o?void 0:null===(t=o.elements)||void 0===t?void 0:t.map(g));case 6:case"end":return a.stop()}}),_callee4)})));return function getCourseHighlights(t){return e.apply(this,arguments)}}()},nS3k:function(module,exports,e){e("D77H")},p6CZ:function(module,e,t){"use strict";var n=t("k8gO"),a=t("F9YM"),createSnapshot=function(e){var t=document.createElement("canvas");t.width=960,t.height=540;var n=e.el().querySelector("video"),a=t.getContext("2d");return a&&n&&a.drawImage(n,0,0,t.width,t.height),t.toDataURL("image/jpeg")};t.d(e,"c",(function(){return r})),t.d(e,"b",(function(){return o})),t.d(e,"a",(function(){return i})),t.d(e,"d",(function(){return c}));var r=function getBlobFromDataURI(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),r=new Uint8Array(a),o=0;o<t.length;o+=1)r[o]=t.charCodeAt(o);return new Blob([a],{type:n})},o=function generateHighlightFromTranscriptSelection(e,t){var a=e.transcriptTextStartIndex,r=e.transcriptTextEndIndex,o=t.cues.filter((function(e){return e.index>=a.cueIndex&&e.index<=r.cueIndex})),i=o.reduce((function(e,t){var n=t.index,o=t.text,i=a.cueIndex,c=a.textIndex,s=r.cueIndex,u=r.textIndex;if(n===i){if(n===s)return"".concat(e).concat(o.substring(c,u+1));return"".concat(e).concat(o.substring(c))}if(n===s)return"".concat(e," ").concat(o.substring(0,u+1));return"".concat(e," ").concat(o)}),""),c=Object(n.a)(),s=c,u=o[0],d,l=o[o.length-1].endTime,m,g,p="",f=!0,h=!1,v;return{id:c,clientId:s,captureTs:u.startTime,noteStartTs:u.startTime,noteEndTs:l,transcriptText:i,noteText:"",languageCode:t.languageCode,transcriptTextStartIndex:a,transcriptTextEndIndex:r,pendingCreate:!0,pendingUpdate:!1}},i=function generateHighlightFromCaptureButton(e,t){var r=Object(n.a)(),o=r,i="",c=e.languageCode,s=t.currentTime(),u=Object(a.d)(e.cues,s,c),d=u[0],l=u[u.length-1],m=u.reduce((function(e,t){if(t.index===d.index)return"".concat(e).concat(t.text);return"".concat(e," ").concat(t.text)}),""),g={textIndex:0,cueIndex:d.index},p={textIndex:l.text.length-1,cueIndex:l.index},f=l.endTime,h,v=!0,b=!1,x;return{id:r,clientId:o,captureTs:s,noteStartTs:d.startTime,noteEndTs:f,transcriptText:m,noteText:"",languageCode:c,transcriptTextStartIndex:g,transcriptTextEndIndex:p,snapshotDataUrl:createSnapshot(t),pendingCreate:!0,pendingUpdate:!1}},c=function getDraftFromHighlight(e){var t=e.itemId,n=e.courseId,a=e.highlight,r=e.languageCode,o=a.noteStartTs,i=a.noteEndTs,c=a.captureTs,s=a.snapshotUrl,u=a.transcriptText,d=a.noteText,l=a.transcriptTextEndIndex,m;return{details:{typeName:"video",definition:{itemId:t,courseId:n,snapshotUrl:s||"",transcriptTextStartIndex:a.transcriptTextStartIndex,transcriptTextEndIndex:l,languageCode:r,transcriptText:u,noteEndTs:i&&1e3*i,captureTs:c&&1e3*c,noteStartTs:o&&1e3*o}},userNote:d}}}}]);
//# sourceMappingURL=en.86.18d331f499b6363b668b.js.map